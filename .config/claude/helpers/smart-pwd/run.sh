(EMOJI="${TERMINAL_TITLE_EMOJI:-$(bash "$(dirname "${BASH_SOURCE[0]}")/../get-emoji/run.sh")}"; git_root=$(git rev-parse --show-toplevel 2>/dev/null); [ -n "$git_root" ] && { cwd=$(pwd); if [[ "$git_root" =~ \.worktrees/([^/]+)$ ]]; then repo_name=$(basename "$(dirname "$(git rev-parse --git-common-dir 2>/dev/null)")"); branch_name=$(basename "$git_root"); rel_path=$(git rev-parse --show-prefix 2>/dev/null); rel_path=${rel_path%/}; [ -n "$rel_path" ] && printf "%s%sðŸŒ³%s/%s\n" "$EMOJI" "$repo_name" "$branch_name" "$rel_path" || printf "%s%sðŸŒ³%s\n" "$EMOJI" "$repo_name" "$branch_name"; else rel_path=$(git rev-parse --show-prefix 2>/dev/null); rel_path=${rel_path%/}; [ -n "$rel_path" ] && printf "%s %s/%s\n" "$EMOJI" "$(basename "$git_root")" "$rel_path" || printf "%s %s\n" "$EMOJI" "$(basename "$git_root")"; fi; } || printf "%s %s\n" "$EMOJI" "$(pwd | sed "s|^$HOME/||")")
